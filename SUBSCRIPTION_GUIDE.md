# üîó Subscription System Guide - v3.1

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π.

---

## üìã –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ v3.1 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É (vless, vmess, trojan)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É–∑–ª–∞–º (nodes)
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É
- ‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: Individual –∏ Grouped
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω—É –∏ –ø—Ä–µ—Ñ–∏–∫—Å—É

---

## üéØ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1. Individual Mode (–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ)
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º - –æ–¥–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ email.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–∞–∂–¥—ã–π email –∏–º–µ–µ—Ç —Å–≤–æ—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### 2. Grouped Mode (–ì—Ä—É–ø–ø–æ–≤—ã–µ)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –æ–±—â–∏–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º.

**–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ:**
- **–î–æ–º–µ–Ω—É:** –í—Å–µ email —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–æ–º–µ–Ω–æ–º
  - –ü—Ä–∏–º–µ—Ä: `user1@company.com`, `user2@company.com` ‚Üí –≥—Ä—É–ø–ø–∞ `company.com`
- **–ü—Ä–µ—Ñ–∏–∫—Å—É:** Email —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞—á–∞–ª–æ–º (3+ —Å–∏–º–≤–æ–ª–∞)
  - –ü—Ä–∏–º–µ—Ä: `admin1@...`, `admin2@...` ‚Üí –≥—Ä—É–ø–ø–∞ `admin`

---

## üîå API Endpoints

### 1. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞

#### `GET /api/v1/sub/{email}`

**–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
```bash
curl https://your-domain/api/v1/sub/user@example.com
```

**–° —Ñ–∏–ª—å—Ç—Ä–æ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:**
```bash
# –¢–æ–ª—å–∫–æ VLESS
curl "https://your-domain/api/v1/sub/user@example.com?protocol=vless"

# –¢–æ–ª—å–∫–æ VMess
curl "https://your-domain/api/v1/sub/user@example.com?protocol=vmess"

# –¢–æ–ª—å–∫–æ Trojan
curl "https://your-domain/api/v1/sub/user@example.com?protocol=trojan"
```

**–° —Ñ–∏–ª—å—Ç—Ä–æ–º —É–∑–ª–æ–≤:**
```bash
# –¢–æ–ª—å–∫–æ –∏–∑ —É–∑–ª–æ–≤ US –∏ UK
curl "https://your-domain/api/v1/sub/user@example.com?nodes=US,UK"
```

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
```bash
# VLESS —Ç–æ–ª—å–∫–æ —Å —É–∑–ª–æ–≤ NL –∏ DE
curl "https://your-domain/api/v1/sub/user@example.com?protocol=vless&nodes=NL,DE"
```

---

### 2. –ì—Ä—É–ø–ø–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞

#### `GET /api/v1/sub-grouped/{identifier}`

**–ü–æ –¥–æ–º–µ–Ω—É:**
```bash
# –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã —Å –¥–æ–º–µ–Ω–æ–º @company.com
curl "https://your-domain/api/v1/sub-grouped/company.com"
```

**–ü–æ –ø—Ä–µ—Ñ–∏–∫—Å—É:**
```bash
# –í—Å–µ email –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "admin"
curl "https://your-domain/api/v1/sub-grouped/admin"

# –í—Å–µ email —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ "user"
curl "https://your-domain/api/v1/sub-grouped/user"
```

**–° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:**
```bash
# –í—Å–µ admin* —Ç–æ–ª—å–∫–æ VLESS
curl "https://your-domain/api/v1/sub-grouped/admin?protocol=vless"

# –í—Å–µ company.com —Ç–æ–ª—å–∫–æ —Å —É–∑–ª–æ–≤ US –∏ UK
curl "https://your-domain/api/v1/sub-grouped/company.com?nodes=US,UK"
```

---

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI

### –§–∏–ª—å—Ç—Ä—ã

1. **Protocol Filter** - –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫:
   - All Protocols (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - VLESS
   - VMess
   - Trojan

2. **Node Filter** - –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —É–∑–ª–æ–≤:
   - –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —É–∑–ª–∞ - –¥–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –∏–∑ —Ñ–∏–ª—å—Ç—Ä–∞
   - –ö–Ω–æ–ø–∫–∞ "Clear" - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —É–∑–ª—ã
   - –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

3. **–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
   - üë§ Individual - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
   - üìÅ Grouped - –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏

### Individual Mode

**–¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
- Email –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
- –î–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- –°—Å—ã–ª–∫—É –ø–æ–¥–ø–∏—Å–∫–∏ (—Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤)
- –ö–Ω–æ–ø–∫—É Copy

**–°—Å—ã–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤!

### Grouped Mode

**–ö–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä—É–ø–ø –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã (–¥–æ–º–µ–Ω –∏–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö email –≤ –≥—Ä—É–ø–ø–µ
- –°—Å—ã–ª–∫—É –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- –ö–Ω–æ–ø–∫—É Copy

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã

**–ó–∞–¥–∞—á–∞:** –í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç email @company.com

**–†–µ—à–µ–Ω–∏–µ:**
```
–†–µ–∂–∏–º: Grouped
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: company.com
–°—Å—ã–ª–∫–∞: https://your-domain/api/v1/sub-grouped/company.com
```

–û–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤! –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ email @company.com –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–µ—Ç –≤ –ø–æ–¥–ø–∏—Å–∫—É.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: VIP –∫–ª–∏–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ VLESS

**–ó–∞–¥–∞—á–∞:** VIP –∫–ª–∏–µ–Ω—Ç—ã —Ö–æ—Ç—è—Ç —Ç–æ–ª—å–∫–æ VLESS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```
–†–µ–∂–∏–º: Individual
Email: vip@example.com
Protocol Filter: VLESS
–°—Å—ã–ª–∫–∞: https://your-domain/api/v1/sub/vip@example.com?protocol=vless
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ

**–ó–∞–¥–∞—á–∞:** –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ EU —Å–µ—Ä–≤–µ—Ä—ã

**–†–µ—à–µ–Ω–∏–µ:**
```
–†–µ–∂–∏–º: Grouped
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: eu
Node Filter: NL, DE, UK
–°—Å—ã–ª–∫–∞: https://your-domain/api/v1/sub-grouped/eu?nodes=NL,DE,UK
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

**–ó–∞–¥–∞—á–∞:** –í—Å–µ test* –∞–∫–∫–∞—É–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä

**–†–µ—à–µ–Ω–∏–µ:**
```
–†–µ–∂–∏–º: Grouped
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: test
Node Filter: TestServer
Protocol Filter: vmess
–°—Å—ã–ª–∫–∞: https://your-domain/api/v1/sub-grouped/test?protocol=vmess&nodes=TestServer
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- TTL: 60 —Å–µ–∫—É–Ω–¥
- –ö—ç—à –∫–ª—é—á: `email_protocol_nodes`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É–∑–ª–æ–≤

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º)

1. **–ü–æ –¥–æ–º–µ–Ω—É:**
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–∞—Å—Ç–∏ –ø–æ—Å–ª–µ `@`
   - –ì—Ä—É–ø–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è 2+ email —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–æ–º–µ–Ω–æ–º

2. **–ü–æ –ø—Ä–µ—Ñ–∏–∫—Å—É:**
   - Regex: `^([a-zA-Z]{3,})`
   - –ú–∏–Ω–∏–º—É–º 3 –±—É–∫–≤—ã –¥–æ —Ü–∏—Ñ—Ä/—Å–∏–º–≤–æ–ª–æ–≤
   - –ì—Ä—É–ø–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è 2+ email —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç (Base64):**
```
base64_encode(link1\nlink2\nlink3...)
```

–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π subscription format –¥–ª—è generic clients –∫–ª–∏–µ–Ω—Ç–æ–≤.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ email:
- `count` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
- `last_download` - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç: `DD.MM HH:MM`)

**–í–∞–∂–Ω–æ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ - –∫–∞–∂–¥—ã–π email –≤ –≥—Ä—É–ø–ø–µ –ø–æ–ª—É—á–∞–µ—Ç +1 –∫ —Å—á–µ—Ç—á–∏–∫—É.

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 404 Not Found

**–ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:**
- Email –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
- Identifier –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∏ –æ–¥–Ω–æ–º—É email (grouped mode)
- –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –∫–ª–∏–µ–Ω—Ç–æ–≤

**–û—Ç–≤–µ—Ç:**
```
Status: 404
Content: "Not found" –∏–ª–∏ "No matching clients found"
```

### –ü—É—Å—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

–ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã —É–∫–∞–∑–∞–Ω—ã, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—É—Å—Ç–æ–π - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 404.

---

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
```bash
# ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–¥–µ–ª–∞
/api/v1/sub-grouped/sales?nodes=US,EU

# ‚ùå –ü–ª–æ—Ö–æ - 20 –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
/api/v1/sub/sales1@... 
/api/v1/sub/sales2@...
...
```

### 2. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```bash
# ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
/api/v1/sub/user@example.com?nodes=FastServer

# ‚ùå –ü–ª–æ—Ö–æ - –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã, –≤–∫–ª—é—á–∞—è –º–µ–¥–ª–µ–Ω–Ω—ã–µ
/api/v1/sub/user@example.com
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

```bash
# ‚úÖ –•–æ—Ä–æ—à–æ - –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
/api/v1/sub/legacy@example.com?protocol=vmess

# ‚úÖ –•–æ—Ä–æ—à–æ - –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
/api/v1/sub/new@example.com?protocol=vless
```

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ email –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

```
‚úÖ –•–æ—Ä–æ—à–æ:
- team1@company.com
- team2@company.com
‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç—Å—è –ø–æ "company.com"

‚úÖ –•–æ—Ä–æ—à–æ:
- admin-us@domain.com
- admin-eu@domain.com
‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç—Å—è –ø–æ "admin"

‚ùå –ü–ª–æ—Ö–æ:
- u1@domain1.com
- user@domain2.com
- a@domain3.com
‚Üí –ù–µ—Ç –æ–±—â–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/sub/` –∏ `/sub-grouped/` **–ù–ï –¢–†–ï–ë–£–Æ–¢ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** –ø–æ –¥–∏–∑–∞–π–Ω—É.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ email –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–π—Ç–µ email –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π fail2ban:
- –õ–∏–º–∏—Ç: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: 1 —á–∞—Å –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è

---

## üìà –ú–∏–≥—Ä–∞—Ü–∏—è —Å v3.0

–°—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã**:

```bash
# v3.0 (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)
/api/v1/sub/user@example.com

# v3.1 (—Ç–µ –∂–µ —Å—Å—ã–ª–∫–∏ + –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
/api/v1/sub/user@example.com
/api/v1/sub/user@example.com?protocol=vless
/api/v1/sub-grouped/company
```

**–ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Å—ã–ª–∫–∞—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!**

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Grouped –ø–æ–¥–ø–∏—Å–∫–∞ –ø—É—Å—Ç–∞—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º identifier

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ email
curl -u admin:pass https://your-domain/api/v1/emails

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å 2+ email —Å –æ–±—â–∏–º –ø—Ä–∏–∑–Ω–∞–∫–æ–º
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∏–ª—å—Ç—Ä –ø–æ —É–∑–ª—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —É–∑–ª–∞ (case-sensitive!)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
?nodes=US,UK

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
?nodes=us,uk  # –∏–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Å—ã–ª–∫–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –ò–ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å 60 —Å–µ–∫—É–Ω–¥ (TTL –∫—ç—à–∞)

---

## üìû API Reference

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø     | –ó–Ω–∞—á–µ–Ω–∏—è                    | –û–ø–∏—Å–∞–Ω–∏–µ                           |
|------------|---------|-----------------------------|------------------------------------|
| `protocol` | string  | vless, vmess, trojan        | –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É                |
| `nodes`    | string  | node1,node2,node3           | –°–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é         |

### –ü—Ä–∏–º–µ—Ä—ã curl

```bash
# –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
curl "https://your-domain/api/v1/sub/user@example.com"

# –° –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º
curl "https://your-domain/api/v1/sub/user@example.com?protocol=vless"

# –° —É–∑–ª–∞–º–∏
curl "https://your-domain/api/v1/sub/user@example.com?nodes=US,EU"

# –ì—Ä—É–ø–ø–æ–≤–∞—è
curl "https://your-domain/api/v1/sub-grouped/company"

# –ì—Ä—É–ø–ø–æ–≤–∞—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
curl "https://your-domain/api/v1/sub-grouped/admin?protocol=trojan&nodes=SecureNode"
```

---

## üìù Changelog v3.1

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É (?protocol=)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É–∑–ª–∞–º (?nodes=)
- ‚úÖ Endpoint /sub-grouped/{identifier}
- ‚úÖ UI —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ UI
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫

**–£–ª—É—á—à–µ–Ω–æ:**
- üîß –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã
- üîß –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫
- üîß UI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ–º

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ 100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v3.0
- ‚úÖ –°—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

**–í–µ—Ä—Å–∏—è:** 3.1  
**–î–∞—Ç–∞:** 2026-02-20
